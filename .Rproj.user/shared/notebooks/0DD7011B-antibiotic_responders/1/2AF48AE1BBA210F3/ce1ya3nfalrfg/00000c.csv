"0","library(data.table)"
"0","map = c(E0 = ""pre"", E7 = ""during"", E90 = ""post"")"
"0",""
"0","ca <- fread(""https://github.com/CSB5/Recovery_Determinants_Study/raw/master/Data/Suppl1_CA_Final.txt"")"
"2"," [100%] Downloaded 164 bytes..."
"2","
"
"2"," [100%] Downloaded 21673 bytes..."
"2","
"
"0","ca <- melt(ca, id.vars = ""Index"", variable.name = ""species"", value.name = ""percentage"")"
"0","setnames(ca, ""Index"", ""Sample_Name"")"
"0","ca[, ""stage"" := factor(map[tstrsplit(Sample_Name, ""P\\d+"")[[2]]], levels = map)]"
"0","ca[, ""sample_id"" := tstrsplit(Sample_Name, ""E"")[[1]]]"
"0","ca[, ""species"" := gsub(""^s__"", """", species)]"
"0","ca[, ""country"" := ""Canada""]"
"0","ca <- ca[, .(percentage = mean(percentage), Sample_Name = Sample_Name[1]), "
"0","         by=c(""sample_id"", ""stage"", ""country"", ""species"")]"
"0","ca"
